{
  "name": "lockpage-full-stack-starter",
  "version": "0.1.0",
  "description": "Deploy a new password protected Next.js app to AWS securely in 10 minutes",
  "license": "MIT",
  "scripts": {
    "build": "yarn build:all",
    "build:all": "yarn build:lockpage && yarn build:main",
    "build:all:dev": "yarn build:lockpage:dev && yarn build:main:dev",
    "build:all:test": "yarn build:lockpage:test && yarn build:main:test",
    "build:local": "yarn build:lockpage:local && yarn build",
    "build:lockpage": "yarn prebuild:lockpage && $npm_package_env_PROD next build lockpage && $npm_package_env_PROD next export lockpage -o lockpage/export && yarn lockpage:fix",
    "build:lockpage:dev": "yarn prebuild:lockpage && $npm_package_env_DEV next build lockpage && $npm_package_env_DEV next export lockpage -o lockpage/export && yarn lockpage:fix:dev",
    "build:lockpage:local": "yarn prebuild:lockpage && $npm_package_env_LOCAL next build lockpage && $npm_package_env_LOCAL next export lockpage -o lockpage/export && yarn lockpage:fix:local",
    "build:lockpage:test": "yarn prebuild:lockpage && $npm_package_env_TEST next build lockpage && $npm_package_env_TEST next export lockpage -o lockpage/export && yarn lockpage:fix:test",
    "build:main": "yarn prebuild:main && $npm_package_env_PROD next build",
    "build:main:dev": "yarn prebuild:main && $npm_package_env_DEV next build",
    "build:main:test": "yarn prebuild:main && $npm_package_env_TEST next build",
    "build:test": "yarn prebuild && $npm_package_env_TEST next build",
    "clean": "yarn clean:all",
    "clean:all": "yarn clean:lockpage && yarn clean:main",
    "clean:lockpage": "rm -rf lockpage/.next lockpage/out lockpage/export",
    "clean:main": "rm -rf .next",
    "dev": "yarn dev:main",
    "dev:guest": "ACTIVE_INDEX=1 $npm_package_env_DEV_HOT next dev -p 4000",
    "dev:lockpage": "$npm_package_env_DEV_HOT next dev lockpage -p 3100",
    "dev:main": "ACTIVE_INDEX=0 $npm_package_env_DEV_HOT next dev -p 4000",
    "gencerts": "openssl req -x509 -sha256 -days 3650 -nodes -newkey rsa:4096 -keyout server/localhost.key -out server/localhost.crt -subj '/CN=localhost'",
    "jest": "yarn jest:all",
    "jest:P1": "$npm_package_env_TEST $(yarn bin)/jest $npm_package_config_jest_P1",
    "jest:all": "yarn start:test && $npm_package_env_TEST $(yarn bin)/jest $npm_package_config_jest_all",
    "jest:all:build": "yarn build:all:test && yarn start:test && $npm_package_env_TEST $(yarn bin)/jest $npm_package_config_jest_all",
    "jest:app": "$npm_package_env_TEST $(yarn bin)/jest $npm_package_config_jest_app",
    "jest:lockpage": "$npm_package_env_TEST $(yarn bin)/jest $npm_package_config_jest_lockpage",
    "jest:server": "yarn start:test && $npm_package_env_TEST $(yarn bin)/jest $npm_package_config_jest_server",
    "jest:server:build": "yarn build:all:test && yarn start:test && $npm_package_env_TEST $(yarn bin)/jest $npm_package_config_jest_server",
    "jest:watch": "$npm_package_env_TEST $(yarn bin)/jest $npm_package_config_jest_all --watch",
    "lint": "next lint",
    "lockpage:export": "$npm_package_env_PROD next export",
    "lockpage:fix": "$npm_package_env_PROD node ./scripts/fix_lockpage_export.node.js",
    "lockpage:fix:dev": "$npm_package_env_DEV node ./scripts/fix_lockpage_export.node.js",
    "lockpage:fix:local": "$npm_package_env_LOCAL node ./scripts/fix_lockpage_export.node.js",
    "lockpage:fix:test": "$npm_package_env_TEST node ./scripts/fix_lockpage_export.node.js",
    "prebuild": "yarn prebuild:all",
    "prebuild:all": "yarn clean:all",
    "prebuild:lockpage": "yarn clean:lockpage",
    "prebuild:main": "yarn clean:main",
    "script:secrets": "$npm_package_env_COMMON node ./scripts/populate_secrets.node.js",
    "serve": "yarn serve:prod",
    "serve:dev": "yarn && yarn build:all:dev && yarn start:dev",
    "serve:local": "yarn && yarn build:local && yarn start:local",
    "serve:prod": "yarn && yarn build:all && yarn start",
    "serve:test": "yarn && yarn build:all:test && yarn start:test",
    "start": "yarn start:prod",
    "start:dev": "pm2 stop server; pm2 start server --watch --attach --interpreter env-cmd --interpreter-args '-f ./.env/development.env.js node'",
    "start:devSAVE": "pm2 start server --watch --interpreter env-cmd --interpreter-args '-f ./.env/development.env.js node' && pm2 logs --timestamp",
    "start:local": "pm2 stop server; pm2 start server --watch --interpreter env-cmd --interpreter-args '-f ./.env/.local.env.js node'",
    "start:prod": "pm2 stop server; pm2 start server --interpreter env-cmd --interpreter-args '-f ./.env/production.env.js node'",
    "start:test": "pm2 stop server --silent; pm2 start server --silent --watch --interpreter env-cmd --interpreter-args '-f ./.env/development.env.js node'",
    "start:next": "$npm_package_env_PROD next start",
    "stop": "yarn stop:server",
    "stop:server": "pm2 stop server",
    "testcafe": "yarn testcafe:main:dev",
    "testcafe:guest": "ACTIVE_INDEX=1 $npm_package_env_TEST $(yarn bin)/testcafe $npm_package_config_testcafe_guest",
    "testcafe:guest:dev": "ACTIVE_INDEX=1 $npm_package_env_TEST_HOT $(yarn bin)/testcafe $npm_package_config_testcafe_guest",
    "testcafe:main": "ACTIVE_INDEX=0 $npm_package_env_TEST $(yarn bin)/testcafe $npm_package_config_testcafe_main",
    "testcafe:main:dev": "ACTIVE_INDEX=0 $npm_package_env_TEST_HOT $(yarn bin)/testcafe $npm_package_config_testcafe_main",
    "testcafe:start": "yarn start:test && $npm_package_env_TEST $(yarn bin)/testcafe"
  },
  "config": {
    "jest_P1": "--config=test/jest/jest.config.js --t=\\[P1\\]",
    "jest_all": "--config=test/jest/jest.config.js",
    "jest_app": "--config=test/jest/app.jest.config.js",
    "jest_guest": "--config=test/jest/guest.jest.config.js",
    "jest_lockpage": "--config=test/jest/lockpage.jest.config.js",
    "jest_main": "--config=test/jest/main.jest.config.js",
    "jest_server": "--config=test/jest/server.jest.config.js",
    "testcafe_guest": "--config-file=test/testcafe/guest.testcaferc.js",
    "testcafe_main": "--config-file=test/testcafe/main.testcaferc.js"
  },
  "env": {
    "COMMON": "env-cmd -f ./.env/common.env.js",
    "DEV": "env-cmd -f ./.env/development.env.js",
    "DEV_HOT": "env-cmd -f ./.env/development-hot.env.js",
    "LOCAL": "env-cmd -f ./.env/.local.env.js",
    "PROD": "env-cmd -f ./.env/production.env.js",
    "TEST": "env-cmd -f ./.env/test.env.js",
    "TEST_HOT": "env-cmd -f ./.env/test-hot.env.js"
  },
  "dependencies": {
    "@stitches/react": "^1.2.6",
    "aws-sdk": "^2.1057.0",
    "axios": "^0.24.0",
    "cookie-parser": "^1.4.6",
    "endent": "1.4.1",
    "env-cmd": "^10.1.0",
    "express": "^4.17.2",
    "express-sslify": "^1.2.0",
    "helmet": "^5.0.1",
    "jsonwebtoken": "^8.5.1",
    "morgan": "^1.10.0",
    "next": "^12.0.7",
    "prop-types": "^15.8.0",
    "react": "17.0.2",
    "react-dom": "17.0.2",
    "superagent": "^7.0.1"
  },
  "devDependencies": {
    "@babel/core": "^7.16.7",
    "@babel/eslint-parser": "^7.16.5",
    "@babel/preset-env": "^7.16.7",
    "@babel/preset-react": "^7.16.7",
    "@next/eslint-plugin-next": "^12.0.7",
    "@stylelint/postcss-css-in-js": "^0.37.2",
    "@testing-library/jest-dom": "^5.16.1",
    "@testing-library/react": "^12.1.2",
    "@testing-library/testcafe": "^4.4.0",
    "@testing-library/user-event": "^13.5.0",
    "@types/jest": "^27.4.0",
    "babel-jest": "^27.4.5",
    "eslint": "^8.6.0",
    "eslint-config-airbnb": "^19.0.4",
    "eslint-config-next": "12.0.7",
    "eslint-plugin-import": "^2.25.3",
    "eslint-plugin-jsx-a11y": "^6.5.1",
    "eslint-plugin-prettier": "^4.0.0",
    "jest": "^27.4.5",
    "jest-extended": "^1.2.0",
    "jest-transform-css": "^3.0.0",
    "msw": "^0.36.3",
    "nodemon": "^2.0.15",
    "snapshot-diff": "^0.9.0",
    "stylelint-config-recommended": "^6.0.0",
    "stylelint-config-styled-components": "^0.1.1",
    "stylelint-processor-styled-components": "^1.10.0",
    "supertest": "^6.1.6",
    "testcafe": "^1.18.1",
    "testcafe-react-selectors": "^4.1.5",
    "ts-node": "^10.4.0",
    "typescript": "^4.5.5"
  },
  "msw": {
    "workerDirectory": "public"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/tw-space/lockpage-full-stack-starter"
  }
}
